"use strict";(globalThis.webpackChunkorion_belt_docs=globalThis.webpackChunkorion_belt_docs||[]).push([[1684],{28453(e,n,r){r.d(n,{R:()=>l,x:()=>o});var s=r(96540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}},56734(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"quickstart/server","title":"Server Setup","description":"The Orion-Belt Server is the central control plane that manages agents, users, permissions, and session recording.","source":"@site/docs/quickstart/server.md","sourceDirName":"quickstart","slug":"/quickstart/server","permalink":"/docs/quickstart/server","draft":false,"unlisted":false,"editUrl":"https://github.com/zrougamed/orion-belt/tree/main/docs/docs/quickstart/server.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Server Setup"},"sidebar":"tutorialSidebar","previous":{"title":"Server Setup","permalink":"/docs/quickstart/server2"},"next":{"title":"Agent Setup","permalink":"/docs/quickstart/agent"}}');var t=r(74848),i=r(28453);const l={sidebar_position:2,title:"Server Setup"},o="Orion-Belt Server Setup",c={},a=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"Steps",id:"steps",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Start the Server",id:"start-the-server",level:2},{value:"Verify ports:",id:"verify-ports",level:3},{value:"cli Usage",id:"cli-usage",level:3},{value:"Quickstart Flow",id:"quickstart-flow",level:2},{value:"FAQ",id:"faq",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"orion-belt-server-setup",children:"Orion-Belt Server Setup"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Orion-Belt Server"})," is the central control plane that manages agents, users, permissions, and session recording."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,t.jsx)(n.mermaid,{value:'flowchart LR\n    Client["User Client (osh)"] --\x3e|SSH via server| Server["Orion-Belt Server"]\n    Server --\x3e|SSH Proxy| Agent["Agent Machine"]\n    Server --\x3e DB["Database (PostgreSQL)"]\n    Server --\x3e Logs["Session & Audit Logs"]\n    Server --\x3e Plugins["Optional Plugins (Slack, Audit, etc.)"]'}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Linux server (Ubuntu/Debian recommended)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"PostgreSQL"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"OpenSSH server"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"curl, tar"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"steps",children:"Steps"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo apt update\nsudo apt install -y curl openssh-server postgresql tar\nsudo systemctl enable postgresql\nsudo systemctl start postgresql\nsudo -u postgres psql -c "ALTER USER postgres PASSWORD \'postgres\';"\nsudo mkdir -p /opt/orion-belt/bin /etc/orion-belt/plugins /var/lib/orion-belt/recordings /var/log/orion-belt\nsudo chmod -R 755 /opt/orion-belt /etc/orion-belt /var/lib/orion-belt /var/log/orion-belt\nsudo ssh-keygen -t ed25519 -f /etc/orion-belt/ssh_host_key -N ""\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"File"}),": ",(0,t.jsx)(n.code,{children:"/etc/orion-belt/server.yaml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'server:\n  host: "0.0.0.0"\n  port: 2222\n  api_port: 8080\n  ssh_host_key: "/etc/orion-belt/ssh_host_key"\n  api_endpoint: "http://localhost:8080/api"\n  plugin_dir: "/etc/orion-belt/plugins"\n\ndatabase:\n  driver: "postgres"\n  connection_string: "postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable"\n\nrecording:\n  enabled: true\n  storage_path: "/var/lib/orion-belt/recordings"\n  retention_days: 90\n\nauth:\n  rebac_enabled: true\n  allow_temp_access: true\n\nplugins:\n  audit-logger:\n    log_path: "/var/log/orion-belt/audit.log"\n    enabled: true\n  slack-notifications:\n    webhook_url: "https://hooks.slack.com/services/YOUR/WEBHOOK"\n    channel: "#security"\n    enabled: true\n\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"start-the-server",children:"Start the Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo /opt/orion-belt/bin/orion-belt-server --config /etc/orion-belt/server.yaml\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--config <file>"}),": Specify a config file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--log-level <level>"}),": debug, info, warn, error"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"verify-ports",children:"Verify ports:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ss -tulnp | grep 2222  # SSH Proxy\nss -tulnp | grep 8080  # REST API\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cli-usage",children:"cli Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Show active config\norion-belt-server config path\n\n# Register agent\norion-belt-server agent register \\\n  --name agent01 \\\n  --key "$(cat /etc/orion-belt/agent_key.pub)" \\\n  --hostname 192.168.0.110 \\\n  --port 22 \\\n  --tags environment=production,role=web\n\n# Create a user\norion-belt-server user create \\\n  --name alice \\\n  --email alice@example.com \\\n  --key "ssh-ed25519 AAAAB3NzaC1FAKEKEYONLYFORdocs alice@placeholder.ensure" \\\n  --admin\n'})}),"\n",(0,t.jsx)(n.h2,{id:"quickstart-flow",children:"Quickstart Flow"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"flowchart TD\n    subgraph Server\n        S[Orion-Belt Server] --\x3e DB[Database]\n        S --\x3e Logs[Logs & Recordings]\n    end\n    Client --\x3e|SSH| S\n    Agent --\x3e|Heartbeat & Session| S\n    S --\x3e|Proxy| Agent\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Do I need unique Linux users per client on agents?"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Yes, each client maps to a Linux user for session isolation."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Which keys are used?"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Server: Private (",(0,t.jsx)(n.code,{children:"ssh_host_key"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Agent: Public (",(0,t.jsx)(n.code,{children:"agent_key.pub"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Client: Private (",(0,t.jsx)(n.code,{children:"client_key"}),")"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"How long are session recordings kept?"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Controlled by ",(0,t.jsx)(n.code,{children:"recording.retention_days"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);