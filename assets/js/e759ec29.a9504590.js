"use strict";(globalThis.webpackChunkorion_belt_docs=globalThis.webpackChunkorion_belt_docs||[]).push([[9666],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},35029(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var i=t(64323),s=t(74848),o=t(28453);const r={slug:"reverse-ssh-tunneling-explained",title:"How Reverse SSH Tunneling Works in Orion-Belt",authors:["mohamed"],tags:["technical","ssh","architecture"]},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"The Problem with Traditional SSH Access",id:"the-problem-with-traditional-ssh-access",level:2},{value:"Reverse Tunneling Approach",id:"reverse-tunneling-approach",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Trade-offs",id:"trade-offs",level:2}];function h(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"One of the key features of Orion-Belt is its use of reverse SSH tunnels to establish connections. This architectural choice eliminates the need for inbound firewall rules on target machines, but how does it actually work?"}),"\n",(0,s.jsx)(n.h2,{id:"the-problem-with-traditional-ssh-access",children:"The Problem with Traditional SSH Access"}),"\n",(0,s.jsx)(n.p,{children:"Traditional SSH requires opening port 22 (or another SSH port) on each target machine to accept incoming connections. This creates several challenges:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Firewall management becomes complex as the fleet grows"}),"\n",(0,s.jsx)(n.li,{children:"Each exposed port is a potential attack surface"}),"\n",(0,s.jsx)(n.li,{children:"Dynamic IPs and NAT complicate access"}),"\n",(0,s.jsx)(n.li,{children:"Monitoring and logging are fragmented across machines"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"reverse-tunneling-approach",children:"Reverse Tunneling Approach"}),"\n",(0,s.jsx)(n.p,{children:"Orion-Belt inverts this model. Instead of clients connecting directly to target machines, the target machines connect outbound to the gateway server. When a user wants to SSH into a machine, the gateway routes the connection through the existing tunnel."}),"\n",(0,s.jsx)(n.p,{children:"Here's the flow:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Agent on target machine establishes persistent SSH connection to gateway"}),"\n",(0,s.jsx)(n.li,{children:"Agent registers itself and maintains the connection"}),"\n",(0,s.jsx)(n.li,{children:"User authenticates with gateway and requests access to target"}),"\n",(0,s.jsx)(n.li,{children:"Gateway verifies permissions and routes SSH session through existing tunnel"}),"\n",(0,s.jsx)(n.li,{children:"User's session appears as a normal SSH connection to target machine"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"benefits",children:"Benefits"}),"\n",(0,s.jsx)(n.p,{children:"This architecture provides several advantages:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Target machines never listen for incoming connections. Only one component (the gateway) needs to be internet-accessible."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Simplicity"}),": No firewall rules needed on target machines. Just one outbound connection."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Observability"}),": All access flows through a single point, making audit logs comprehensive and consistent."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Flexibility"}),": Works behind NAT, with dynamic IPs, and across complex network topologies."]}),"\n",(0,s.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,s.jsxs)(n.p,{children:["The agent uses Go's ",(0,s.jsx)(n.code,{children:"golang.org/x/crypto/ssh"})," package to create the reverse tunnel. The connection includes automatic reconnection logic and heartbeat mechanisms to maintain connectivity."]}),"\n",(0,s.jsx)(n.p,{children:"On the gateway side, the SSH proxy maintains a registry of active tunnels and routes incoming user sessions to the appropriate agent connection. Session data passes through the gateway, enabling real-time monitoring and recording without compromising end-to-end encryption of the SSH protocol itself."}),"\n",(0,s.jsx)(n.h2,{id:"trade-offs",children:"Trade-offs"}),"\n",(0,s.jsx)(n.p,{children:"This approach does introduce a single point of failure (the gateway), which is why high availability features are planned for v1.0. The gateway must also handle the multiplexing of potentially hundreds of concurrent sessions, requiring careful resource management."}),"\n",(0,s.jsx)(n.p,{children:"For most deployments, these trade-offs are acceptable given the security and operational benefits."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},64323(e){e.exports=JSON.parse('{"permalink":"/blog/reverse-ssh-tunneling-explained","editUrl":"https://github.com/zrougamed/orion-belt/tree/main/docs/blog/2026-01-08-reverse-ssh-tunneling-explained.md","source":"@site/blog/2026-01-08-reverse-ssh-tunneling-explained.md","title":"How Reverse SSH Tunneling Works in Orion-Belt","description":"One of the key features of Orion-Belt is its use of reverse SSH tunnels to establish connections. This architectural choice eliminates the need for inbound firewall rules on target machines, but how does it actually work?","date":"2026-01-08T00:00:00.000Z","tags":[{"inline":false,"label":"Technical Deep Dives","permalink":"/blog/tags/technical","description":"Technical explanations and architecture details"},{"inline":false,"label":"SSH","permalink":"/blog/tags/ssh","description":"SSH and remote access topics"},{"inline":false,"label":"Architecture","permalink":"/blog/tags/architecture","description":"System design and architecture decisions"}],"readingTime":1.92,"hasTruncateMarker":true,"authors":[{"name":"Mohamed Zrouga","title":"Creator of Orion-Belt","url":"https://github.com/zrougamed","imageURL":"https://github.com/zrougamed.png","key":"mohamed","page":null}],"frontMatter":{"slug":"reverse-ssh-tunneling-explained","title":"How Reverse SSH Tunneling Works in Orion-Belt","authors":["mohamed"],"tags":["technical","ssh","architecture"]},"unlisted":false,"prevItem":{"title":"Introducing Orion-Belt - Open Source PAM for Modern Infrastructure","permalink":"/blog/introducing-orion-belt"},"nextItem":{"title":"Using Orion-Belt to Manage Homelab Access","permalink":"/blog/managing-homelab-access"}}')}}]);