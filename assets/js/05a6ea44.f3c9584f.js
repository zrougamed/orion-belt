"use strict";(globalThis.webpackChunkorion_belt_docs=globalThis.webpackChunkorion_belt_docs||[]).push([[997],{28453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var r=t(96540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},88129(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"quickstart/agent","title":"Agent Setup","description":"Agents run on target machines and connect to the Orion-Belt server. Each agent requires a local Linux user that matches the client connecting.","source":"@site/docs/quickstart/agent.md","sourceDirName":"quickstart","slug":"/quickstart/agent","permalink":"/docs/quickstart/agent","draft":false,"unlisted":false,"editUrl":"https://github.com/zrougamed/orion-belt/tree/main/docs/docs/quickstart/agent.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Agent Setup"},"sidebar":"tutorialSidebar","previous":{"title":"Server Setup","permalink":"/docs/quickstart/server"},"next":{"title":"Client Setup","permalink":"/docs/quickstart/client"}}');var s=t(74848),i=t(28453);const o={sidebar_position:3,title:"Agent Setup"},l="Orion-Belt Agent Setup",a={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Installation Steps",id:"installation-steps",level:2},{value:"Register Agent on Server",id:"register-agent-on-server",level:2},{value:"FAQ",id:"faq",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"orion-belt-agent-setup",children:"Orion-Belt Agent Setup"})}),"\n",(0,s.jsxs)(n.p,{children:["Agents run on target machines and connect to the Orion-Belt server. Each agent requires a ",(0,s.jsx)(n.strong,{children:"local Linux user"})," that matches the client connecting."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart LR\n    Agent["Agent Machine"] --\x3e|Heartbeat & Commands| Server["Orion-Belt Server"]\n    Agent --\x3e LocalUser["Local Linux User"]'}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Install Dependencies:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y curl openssh-client tar\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Create Directories:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo mkdir -p /opt/orion-belt/bin /etc/orion-belt /var/lib/orion-belt/recordings /var/log/orion-belt\nsudo chmod -R 755 /opt/orion-belt /etc/orion-belt /var/lib/orion-belt /var/log/orion-belt\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Generate Agent Key (for server authentication):"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'ssh-keygen -t ed25519 -f /etc/orion-belt/agent_key -N ""\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Copy Binary to Agent Machine:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cp orion-belt-agent /opt/orion-belt/bin/\nchmod +x /opt/orion-belt/bin/orion-belt-agent\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create Agent Configuration:"})," ",(0,s.jsx)(n.code,{children:"/etc/orion-belt/agent.yaml"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'server:\n  host: "192.168.0.109"\n  port: 2222\n\nagent:\n  name: "agent01"\n  tags:\n    environment: "production"\n    role: "web"\n    datacenter: "us-east-1"\n\nauth:\n  key_file: "/etc/orion-belt/agent_key"\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Start Agent:"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nohup /opt/orion-belt/bin/orion-belt-agent --config /etc/orion-belt/agent.yaml \\\n    > /var/log/orion-belt/agent.log 2>&1 &\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"register-agent-on-server",children:"Register Agent on Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'orion-belt-server agent register \\\n  --name agent01 \\\n  --key "$(cat /etc/orion-belt/agent_key.pub)" \\\n  --hostname 192.168.0.110 \\\n  --port 22 \\\n  --tags environment=production,role=web\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Do I need a Linux user for each client?"}),"\nYes, clients connect via a local Linux user mapped to their username."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Do I use private or public keys in config?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Agent config uses ",(0,s.jsx)(n.strong,{children:"private key"})," (",(0,s.jsx)(n.code,{children:"agent_key"}),") to authenticate to the server."]}),"\n",(0,s.jsxs)(n.li,{children:["Server receives ",(0,s.jsx)(n.strong,{children:"public key"})," (",(0,s.jsx)(n.code,{children:"agent_key.pub"}),") during registration."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);